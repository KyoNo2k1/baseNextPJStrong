"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extractStyle = extractStyle;
var _react = _interopRequireDefault(require("react"));
var _cssinjs = require("@ant-design/cssinjs");
var antd = _interopRequireWildcard(require("antd"));
var _server = require("react-dom/server");
var blackList = ['ConfigProvider', 'Drawer', 'Grid', 'Modal', 'Popconfirm', 'Popover', 'Tooltip', 'Tour'];
var styleTagReg = /<style[^>]*>([\s\S]*?)<\/style>/g;
var defaultNode = function defaultNode() {
  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, Object.keys(antd).filter(function (name) {
    return !blackList.includes(name) && name[0] === name[0].toUpperCase();
  }).map(function (compName) {
    var Comp = antd[compName];
    if (compName === 'Dropdown') {
      return /*#__PURE__*/_react.default.createElement(Comp, {
        key: compName,
        menu: {
          items: []
        }
      }, /*#__PURE__*/_react.default.createElement("div", null));
    }
    return /*#__PURE__*/_react.default.createElement(Comp, {
      key: compName
    });
  }));
};
function extractStyle(customTheme) {
  var cache = (0, _cssinjs.createCache)();
  (0, _server.renderToString)( /*#__PURE__*/_react.default.createElement(_cssinjs.StyleProvider, {
    cache: cache
  }, customTheme ? customTheme(defaultNode()) : defaultNode()));

  // Grab style from cache
  var styleText = (0, _cssinjs.extractStyle)(cache);
  return styleText.replace(styleTagReg, '$1');
}